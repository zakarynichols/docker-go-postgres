<!DOCTYPE html>
<html>
  <head>
    <title>HTTP Requests Example</title>
  </head>
  <body>
    <form id="school-form">
      <div class="form-group">
        <label for="schoolId">School ID:</label>
        <input type="text" id="schoolId" name="schoolId" required />
      </div>
      <button type="submit">Get School</button>
    </form>
    <div class="school-data">
      <div class="field">
        <label>School ID:</label>
        <span id="school-id"></span>
      </div>
      <div class="field">
        <label>School Name:</label>
        <span id="school-name"></span>
      </div>
      <div class="field">
        <label>Location:</label>
        <span id="school-location"></span>
      </div>
      <div class="field">
        <label>Type:</label>
        <span id="school-type"></span>
      </div>
    </div>
    <script>
      const schoolFormEl = document.querySelector("#school-form");
      const schoolIdInputEl = document.querySelector("#schoolId");
      const schoolIdEl = document.querySelector("#school-id");
      const schoolNameEl = document.querySelector("#school-name");
      const schoolLocation = document.querySelector("#school-location");
      const schoolTypeEl = document.querySelector("#school-type");

      schoolFormEl.addEventListener("submit", async (event) => {
        event.preventDefault();
        const schoolId = schoolIdInputEl.value;
        try {
          const school = await getSchoolById(schoolId);
          schoolIdEl.textContent = school.id;
          schoolNameEl.textContent = school.name;
          schoolLocation.textContent = school.location;
          schoolTypeEl.textContent = school.type;
        } catch (error) {
          console.error(error);
        }
      });

      const baseURL = "http://localhost:1111";

      async function getSchoolById(schoolId) {
        const response = await fetch(`${baseURL}/schools/${schoolId}`, {
          method: "GET",
        });
        if (response.ok) {
          return await response.json();
        }
        if (response.status === 400) {
          throw new Error("Invalid ID supplied");
        }
        if (response.status === 404) {
          throw new Error("School not found");
        }
      }
    </script>
  </body>
</html>
