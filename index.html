<!DOCTYPE html>
<html>
  <head>
    <title>HTTP Requests Example</title>
  </head>
  <body>
    <button id="time-button">Get Current Time</button>
    <button id="message-button">Get Message</button>
    <button id="add-user-button">Add User</button>

    <br />
    <span id="time"></span>
    <span id="message"></span>
    <span id="add-user"></span>

    <script>
      // Get the buttons and the span elements
      const timeButton = document.getElementById("time-button");
      const messageButton = document.getElementById("message-button");
      const timeSpan = document.getElementById("time");
      const messageSpan = document.getElementById("message");
      const addUserBtn = document.getElementById("add-user-button");
      const addUserSpan = document.getElementById("add-user");

      // Attach event handlers to the buttons
      timeButton.addEventListener("click", async () => {
        const response = await fetch("https://localhost:3000/");
        const time = await response.text();
        timeSpan.innerHTML = time;
      });

      messageButton.addEventListener("click", async () => {
        const response = await fetch("https://localhost:3000/now");
        console.log(response);
        const message = await response.text();
        messageSpan.innerHTML = message;
      });

      // addUserBtn.addEventListener("click", async () => {
      //   fetch("https://localhost:3000/user", {
      //     method: "POST",
      //     body: JSON.stringify({
      //       id: 1,
      //     }),
      //     headers: { "Content-Type": "application/json" },
      //   })
      //     .then((res) => res.json())
      //     .then((data) => {
      //       addUserSpan.innerHTML = data.username;
      //     })
      //     .catch((error) => console.error("Error:", error));
      // });

      addUserBtn.addEventListener("click", async () => {
        fetch("https://localhost:3000/user/user1")
          .then((res) => res.json())
          .then((data) => {
            addUserSpan.innerHTML = data.role;
          })
          .catch((error) => console.error("Error:", error));
      });
    </script>
  </body>
</html>
